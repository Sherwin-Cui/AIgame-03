<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç« èŠ‚åˆ‡æ¢åŠŸèƒ½æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .demo-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            color: #ffd700;
            margin-bottom: 30px;
        }
        .chapter-demo {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .chapter-title {
            font-size: 1.5em;
            color: #87ceeb;
            margin-bottom: 15px;
        }
        .chapter-content {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .demo-button {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .demo-button:hover {
            background: linear-gradient(45deg, #357abd, #2968a3);
            transform: translateY(-2px);
        }
        .current-header {
            background: rgba(255, 215, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #ffd700;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .feature-list li:before {
            content: "âœ“";
            color: #4ade80;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>è‰èˆ¹å€Ÿç®­ - ç« èŠ‚åˆ‡æ¢åŠŸèƒ½æ¼”ç¤º</h1>
        
        <div class="current-header">
            <strong>å½“å‰é¡µé¢æ ‡é¢˜ï¼š</strong>
            <span id="current-title">è‰èˆ¹å€Ÿç®­ - ç¬¬ä¸€ç« ï¼šä¸‰æ—¥ä¹‹çº¦</span>
        </div>
        
        <div class="chapter-demo">
            <div class="chapter-title">åŠŸèƒ½ç‰¹æ€§</div>
            <ul class="feature-list">
                <li>è‡ªåŠ¨æ›´æ–°é¡µé¢æ ‡é¢˜å’ŒHeaderæ–‡å­—</li>
                <li>æ˜¾ç¤ºå¯¹åº”ç« èŠ‚çš„å¼€å¹•æ–‡å­—</li>
                <li>è‡ªåŠ¨æ„å»ºPromptå¹¶è°ƒç”¨AIè·å–é¦–æ¬¡å“åº”</li>
                <li>æ„å»ºPromptçš„æ–¹æ³•ä¸ç¬¬ä¸€ç« ä¿æŒä¸€è‡´</li>
                <li>æ”¯æŒç¬¬äºŒç« å’Œç¬¬ä¸‰ç« çš„å®Œæ•´åˆ‡æ¢</li>
            </ul>
        </div>
        
        <div class="chapter-demo">
            <div class="chapter-title">ç¬¬äºŒç« ï¼šæš—åº¦é™ˆä»“</div>
            <div class="chapter-content">
                æ¬¡æ—¥æ‹‚æ™“ï¼Œæ™¨å…‰ç†¹å¾®ã€‚ä½ åœ¨é²è‚ƒå¼•é¢†ä¸‹ï¼Œæ¥åˆ°æ±Ÿè¾¹åƒ»é™ä¹‹å¤„ï¼Œå¼€å§‹ç­¹è°‹å¤§è®¡ã€‚ç„¶å…¬ç‘¾è™½è¡¨é¢ä¸åŠ¨å£°è‰²ï¼Œæš—ä¸­å´é£äººå››å¤„çª¥æ¢ï¼Œæ¬²çŸ¥ä½ å¦‚ä½•é€ ç®­ã€‚
            </div>
            <button class="demo-button" onclick="switchToChapter(2)">åˆ‡æ¢åˆ°ç¬¬äºŒç« </button>
        </div>
        
        <div class="chapter-demo">
            <div class="chapter-title">ç¬¬ä¸‰ç« ï¼šé›¾å¤œå€Ÿç®­</div>
            <div class="chapter-content">
                ç¬¬ä¸‰æ—¥å­æ—¶ï¼Œå¤§é›¾å¼¥å¤©ï¼Œé•¿æ±Ÿä¹‹ä¸Šç™½èŒ«èŒ«ä¸€ç‰‡ï¼Œå¯¹é¢ä¸è§äººã€‚æ­£å¦‚ä½ æ‰€æ–™ï¼Œå¤©å…¬ä½œç¾ï¼ŒåŠ©ä½ æˆäº‹ã€‚
            </div>
            <button class="demo-button" onclick="switchToChapter(3)">åˆ‡æ¢åˆ°ç¬¬ä¸‰ç« </button>
        </div>
        
        <div class="chapter-demo">
            <div class="chapter-title">è¿”å›ç¬¬ä¸€ç« </div>
            <div class="chapter-content">
                è¿”å›æ¸¸æˆå¼€å§‹çš„ç¬¬ä¸€ç« ï¼Œé‡æ–°ä½“éªŒä¸‰æ—¥ä¹‹çº¦çš„æŒ‘æˆ˜ã€‚
            </div>
            <button class="demo-button" onclick="switchToChapter(1)">è¿”å›ç¬¬ä¸€ç« </button>
        </div>
    </div>
    
    <script type="module">
        import { StateManager } from './js/core/stateManager.js';
        import { UIManager } from './js/ui/uiManager.js';
        import { GameEngine } from './js/core/gameEngine.js';
        
        // åˆå§‹åŒ–æ¸¸æˆç»„ä»¶
        const stateManager = new StateManager();
        const gameEngine = new GameEngine(stateManager);
        const uiManager = new UIManager(stateManager, gameEngine);
        
        // æ¨¡æ‹Ÿæ¸¸æˆå®ä¾‹
        window.gameInstance = {
            stateManager,
            uiManager,
            gameEngine,
            autoCallAI: async () => {
                console.log('ğŸ¤– è‡ªåŠ¨è°ƒç”¨AI - æ¨¡æ‹ŸAIå“åº”');
                // æ¨¡æ‹ŸAIå“åº”å»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, 1000));
                console.log('âœ“ AIå“åº”å®Œæˆ');
                return { success: true, data: { narrative: 'ç« èŠ‚å¼€å§‹ï¼ŒAIå·²å“åº”...' } };
            }
        };
        
        // ç« èŠ‚åˆ‡æ¢å‡½æ•°
        window.switchToChapter = function(chapterNumber) {
            console.log(`\n=== æ¼”ç¤ºï¼šåˆ‡æ¢åˆ°ç¬¬${chapterNumber}ç«  ===`);
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            stateManager.setState({ chapter: chapterNumber });
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜å’Œheader
            uiManager.updateChapterHeader(chapterNumber);
            
            // æ›´æ–°æ¼”ç¤ºé¡µé¢çš„æ ‡é¢˜æ˜¾ç¤º
            const chapterData = stateManager.gameData?.chapters?.[`chapter${chapterNumber}`];
            if (chapterData) {
                const newTitle = `è‰èˆ¹å€Ÿç®­ - ç¬¬${chapterNumber}ç« ï¼š${chapterData.title}`;
                document.getElementById('current-title').textContent = newTitle;
                
                // æ˜¾ç¤ºå¼€å¹•æ–‡å­—
                console.log('ğŸ“– ç« èŠ‚å¼€å¹•æ–‡å­—:');
                console.log(chapterData.openingText);
                
                // æ¨¡æ‹Ÿè‡ªåŠ¨è°ƒç”¨AI
                setTimeout(() => {
                    window.gameInstance.autoCallAI().then(() => {
                        console.log('ğŸ‰ ç« èŠ‚åˆ‡æ¢å®Œæˆï¼');
                    });
                }, 500);
            }
        };
        
        console.log('ğŸ“‹ ç« èŠ‚åˆ‡æ¢æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
        console.log('ğŸ’¡ ç‚¹å‡»æŒ‰é’®å¯ä»¥æµ‹è¯•ç« èŠ‚åˆ‡æ¢åŠŸèƒ½');
        console.log('ğŸ” æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹è¯¦ç»†æ—¥å¿—');
    </script>
</body>
</html>